
{% extends "base.html" %}
{% load static %}

{% block head_extra_meta %}{# <meta> tags go here #}{% endblock %}

{% block head_css %}{# additional <link> tags for CSS #}{% endblock %}

{% block head_js %}{# <script defer> tags for deferred JS only #}{% endblock head_js %}

{% block head_title %}{# Page title. Base page has " | VentApp"; follow this pattern for sub-page titling #}{% endblock %}

{# Add classes to the main <div> wrapping body content #}
{% block body_container_classes %}mx-0 w-100 mw-100{% endblock %}

{% block body_content %}
{# All your page content goes here! #}
   <div class="container-fluid">
      <div class="row">
         <div class="col-8 border-end border-3 border-dark">
            {% if chart_type == 'total_pressure' %}
               {% include "widgets/fanDesignCurve/totalPreassure.html" %}
            {% elif chart_type == 'static_pressure' %}
               {% include "widgets/fanDesignCurve/staticPreassure.html" %}
            {% elif chart_type == 'power' %}
               {% include "widgets/fanDesignCurve/power.html" %}
            {% else %}
               {% include "widgets/fanDesignCurve/totalPreassure.html" %}
            {% endif %}
         </div>

         <div class="col-4">
            <div class="row justify-content-center align-items-center">
               <div class="col-12 col-md-10 col-xl-8">
                  {#  Model #}
                  <div class="list-group border border-3 border-warning p-3 mb-2">
                     <div class="row">
                        <p class="text-start fs-6 m-0">Model</p>
                     </div>
                     <div class="row">
                        <div class="input-group">
                           <select class="form-select" id="inputGroupSelect04" aria-label="Example select with button addon">
                              <option selected>...</option>
                              <option value="1">JetStream AXT0800</option>
                              <option value="2">JetStream AXT0500</option>
                              <option value="3">JetStream AXT0300</option>
                           </select>
                        </div>
                     </div>
                  </div>
                  {#  Blade angle #}
                  <div class="list-group border border-3 border-warning p-3 mb-2">
                     <div class="row">
                        <p class="text-start fs-6 m-0">Blade angle</p>
                     </div>
                     <div class="row">
                        <div class="col-6">
                           <div class="input-group  mb-3">
                              <input type="number" class="form-control" aria-label="Blade angle">
                              <span class="input-group-text">Â°</span>
                           </div>
                        </div>
                     </div>
                  </div>
                  {#  Accessories #}
                  <div class="list-group border border-3 border-warning p-3 mb-2">
                     <p class="text-start fs-6 m-0">Accessories</p>
                     <label class="list-group-item">
                        <input class="form-check-input me-1" type="checkbox" value="">
                        Inlet Screen
                     </label>
                     <label class="list-group-item">
                        <input class="form-check-input me-1" type="checkbox" value="">
                        Inlet Annular
                     </label>
                     <label class="list-group-item">
                        <input class="form-check-input me-1" type="checkbox" value="">
                        Silencer
                     </label>
                     <label class="list-group-item">
                        <input class="form-check-input me-1" type="checkbox" value="">
                        Oulet Screen
                     </label>
                  </div>
                  {#  Density #}
                  <div class="list-group border border-3 border-warning p-3">
                     <div class="row">
                        <p class="text-start fs-6 m-0">Density</p>
                     </div>
                     <div class="row">
                        <div class="col-8">
                           <div class="input-group  mb-3">
                              <input type="number" class="form-control" aria-label="Blade angle">
                              <span class="input-group-text">kg/m&#179;</span>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>
{% endblock %}

{% block body_js %}
{# Inline or other types of JS <script> tags here. #}
{# Remember we've already got jQuery and Bootstrap bundle with Popper loaded. #}
   <script src="{% static 'js/d3.v7.js' %}"></script>
   {% comment %} <script src="{% static 'js/scatterplot.js' %}"></script> {% endcomment %}
   <script src="{% static 'js/fancurveplot.js' %}"></script>


   <script type="text/javascript">
      
      const dataV = {{ scatter_data|safe }};
      const promedios = {{ promedios }};
      console.log(promedios);
      // Call the function initially
      document.addEventListener("DOMContentLoaded",
         function() {
            if ("{{ chart_type }}" == "total_pressure"){
               createFanChart(dataV, 'total_pressure', promedios);
            } else if ("{{ chart_type }}" == "static_pressure"){
               createFanChart(dataV, 'static_pressure', promedios);
            } else if ("{{ chart_type }}" == "power"){
               createFanChart(dataV, 'power', promedios);
            }
         });
      // Call the function on window resize
      window.addEventListener("resize", function() { updateFanChart(dataV); });
      // Cambiar vista
      function changeChartType(type) {
         window.location.href = "{% url 'fandesign:fandesign' %}?chart_type=" + type;
      }
   </script> 
{% endblock %}

